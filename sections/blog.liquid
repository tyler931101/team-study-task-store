<section style="padding:2rem">
  <h1 style="margin-bottom:1.5rem">{{ blog.title }}</h1>

  {% if blog.articles.size > 0 %}
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem">
      {% paginate blog.articles by section.settings.articles_per_page %}
        {% for article in blog.articles %}
          <article style="border:1px solid #eee;padding:1rem;border-radius:.5rem">
            {% if article.image %}
              <a href="{{ article.url }}">
                <img
                  src="{{ article.image | image_url: width: 600 }}"
                  alt="{{ article.title }}"
                  style="max-width:100%;border-radius:.5rem;margin-bottom:.5rem"
                >
              </a>
            {% endif %}
            <h2 style="margin:.5rem 0;font-size:1.2rem">
              <a href="{{ article.url }}" style="text-decoration:none;color:inherit">{{ article.title }}</a>
            </h2>
            <small>{{ article.published_at | date: '%B %d, %Y' }}</small>
            <p>{{ article.excerpt | strip_html | truncate: 100 }}</p>
          </article>
        {% endfor %}

        <!-- Pagination -->
        <div style="grid-column:1/-1;text-align:center;margin-top:2rem">
          {% if paginate.pages > 1 %}
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" style="margin-right:1rem">← Prev</a>
            {% endif %}
            Page {{ paginate.current_page }} of {{ paginate.pages }}
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" style="margin-left:1rem">Next →</a>
            {% endif %}
          {% endif %}
        </div>
      {% endpaginate %}
    </div>
  {% else %}
    <p>No articles found.</p>
  {% endif %}
</section>

{% schema %}
{
  "name": "Main blog",
  "settings": [
    {
      "type": "range",
      "id": "articles_per_page",
      "label": "Articles per page",
      "min": 2,
      "max": 12,
      "step": 2,
      "default": 6
    }
  ],
  "presets": [{ "name": "Main blog" }]
}
{% endschema %}
