<section style="padding:2rem">
  <h1 style="margin-bottom:1.5rem">{{ collection.title }}</h1>

  {% if collection.description != blank %}
    <div style="margin-bottom:1.5rem">{{ collection.description }}</div>
  {% endif %}

  {% if collection.products_count > 0 %}
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1rem">
      {% paginate collection.products by section.settings.products_per_page %}
        {% for product in collection.products %}
          <a
            href="{{ product.url }}"
            style="border:1px solid #eee;border-radius:.5rem;padding:1rem;text-decoration:none;color:inherit;display:block;text-align:center"
          >
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | image_url: width: 400 }}"
                alt="{{ product.title }}"
                style="max-width:100%;height:auto;border-radius:.5rem;margin-bottom:.5rem"
              >
            {% endif %}
            <h3 style="font-size:1rem;margin:.25rem 0">{{ product.title }}</h3>
            <span>{{ product.price | money }}</span>
          </a>
        {% endfor %}

        <!-- Pagination -->
        <div style="margin-top:2rem;text-align:center">
          {% if paginate.pages > 1 %}
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" style="margin-right:1rem">← Prev</a>
            {% endif %}
            Page {{ paginate.current_page }} of {{ paginate.pages }}
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" style="margin-left:1rem">Next →</a>
            {% endif %}
          {% endif %}
        </div>
      {% endpaginate %}
    </div>
  {% else %}
    <p>No products found in this collection.</p>
  {% endif %}
</section>

{% schema %}
{
  "name": "Main collection",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Products per page",
      "min": 4,
      "max": 24,
      "step": 4,
      "default": 12
    }
  ],
  "presets": [{ "name": "Main collection" }]
}
{% endschema %}
