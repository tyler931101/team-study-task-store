<section style="padding:3rem 1rem;text-align:center">
  <div style="max-width:1000px;margin:0 auto">
    <h2 style="font-size:2rem;margin-bottom:2rem">{{ section.settings.heading }}</h2>

    {% assign selected_blog = blogs[section.settings.blog] %}
    {% if selected_blog != blank and selected_blog.articles.size > 0 %}
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;text-align:left">
        {% for article in selected_blog.articles limit: section.settings.article_limit %}
          <article style="border:1px solid #eee;padding:1rem;border-radius:.5rem">
            {% if article.image %}
              <a href="{{ article.url }}">
                <img
                  src="{{ article.image | image_url: width: 600 }}"
                  alt="{{ article.title }}"
                  style="max-width:100%;border-radius:.25rem;margin-bottom:.5rem"
                >
              </a>
            {% endif %}
            <h3 style="font-size:1.2rem;margin:.5rem 0">
              <a href="{{ article.url }}" style="text-decoration:none;color:inherit">{{ article.title }}</a>
            </h3>
            <small>{{ article.published_at | date: '%B %d, %Y' }}</small>
            <p style="margin-top:.5rem">{{ article.excerpt | strip_html | truncate: 100 }}</p>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p>No blog posts found.</p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured blog posts",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Latest from our blog"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Select blog"
    },
    {
      "type": "range",
      "id": "article_limit",
      "label": "Number of posts",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 3
    }
  ],
  "presets": [{ "name": "Featured blog posts" }]
}
{% endschema %}
